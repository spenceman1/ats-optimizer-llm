<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ structured_result.name }} - Resume</title>
    <style>
        /* Page / global */
        @page { margin: 36pt; }
        body { font-family: Arial, sans-serif; margin: 0; line-height: 1.25; font-size: 12pt; color: #111; }

        /* Name & header */
        h1 { font-size: 18pt; margin: 0 0 6px 0; }
        .contact-line { font-size: 11pt; color: #222; margin-bottom: 10px; }
        .contact-line a { text-decoration: underline; color: #0066cc; }

        /* Section headings */
        h2 { font-size: 12pt; margin: 14px 0 6px 0; padding-bottom: 2px; border-bottom: 1px solid #ddd; font-weight: bold; }

        /* Experience, projects, volunteering */
        .experience-item, .projects-item, .volunteering-item { margin-bottom: 10px; page-break-inside: avoid; }
        .role-line { font-weight: 700; font-size: 12pt; margin: 0; }
        .role-meta { font-size: 11pt; color: #333; margin: 2px 0 4px 0; }
        .achievement { margin: 0 0 4px 0; font-size: 11.5pt; }

        /* Education & certifications combined */
        .edu-cert-item { margin-bottom: 6px; font-size: 11.5pt; }
        .edu-cert-title { font-weight: bold; display: inline; }

        /* Skills */
        .skills { margin-top: 6px; font-size: 11.5pt; }

        /* Small utility */
        .muted { color: #666; font-size: 11pt; }
    </style>
</head>
<body>

    <!-- Name (now includes certifications) -->
    <h1>{{ structured_result.name }}</h1>

    <!-- Header line -->
    <div class="contact-line">
        {{ structured_result.email or "" }}
        {% if structured_result.phone %} ∙ {{ structured_result.phone }}{% endif %}
        {% if structured_result.linkedin %} ∙ <a href="{{ structured_result.linkedin }}">LinkedIn</a>{% endif %}
        {% if structured_result.website %} ∙ <a href="{{ structured_result.website }}">{{ structured_result.website.replace('https://', '').replace('http://', '').replace('www.', '') }}</a>{% endif %}
        {% if structured_result.github %} ∙ <a href="{{ structured_result.github }}">GitHub</a>{% endif %}
        {% if structured_result.location %} ∙ {{ structured_result.location }}{% endif %}
    </div>

    <!-- Summary -->
    {% if structured_result.summary %}
    <h2>Summary</h2>
    <p>{{ structured_result.summary }}</p>
    {% endif %}

    <!-- Professional Experience -->
    {% if structured_result.experience %}
    <h2>Professional Experience</h2>
    {% for exp in structured_result.experience %}
    <div class="experience-item">
        <p class="role-line">{{ exp.role or "" }}</p>
        <p class="role-meta">
            {{ exp.company or "" }}
            {% if exp.start_date or exp.end_date %} ∙ {{ exp.start_date or "" }} - {{ exp.end_date or "" }}{% endif %}
            {% if exp.location %} ∙ {{ exp.location }}{% endif %}
        </p>
        {% if exp.achievements %}
            {% for achievement in exp.achievements if achievement and achievement|trim %}
                <p class="achievement">• {{ achievement | replace("•", "") | trim }}</p>
            {% endfor %}
        {% endif %}
    </div>
    {% endfor %}
    {% endif %}

    <!-- Project Experience -->
    {% if structured_result.projects %}
    <h2>Project Experience</h2>
    {% for proj in structured_result.projects %}
    <div class="projects-item">
        <p class="role-line">{{ (proj.project_title or proj.title or "") | trim }}</p>
        <p class="role-meta">
            {% set parts = [] %}
            {% if proj.role %}{% do parts.append(proj.role) %}{% endif %}
            {% if proj.organization and proj.organization not in parts %}{% do parts.append(proj.organization) %}{% endif %}
            {% if proj.start_date or proj.end_date %}
                {% set dates = (proj.start_date or "") ~ (" - " if proj.start_date and proj.end_date else "") ~ (proj.end_date or "") %}
                {% if dates.strip() != "-" %}{% do parts.append(dates) %}{% endif %}
            {% endif %}
            {% if proj.location %}{% do parts.append(proj.location) %}{% endif %}
            {{ parts | join(" ∙ ") }}
        </p>
        {% if proj.achievements %}
            {% for achievement in proj.achievements if achievement and achievement|trim %}
                <p class="achievement">• {{ achievement | replace("•", "") | trim }}</p>
            {% endfor %}
        {% endif %}
    </div>
    {% endfor %}
    {% endif %}

    <!-- Volunteering Experience -->
    {% if structured_result.volunteering %}
    <h2>Volunteering Experience</h2>
    {% for vol in structured_result.volunteering %}
    <div class="volunteering-item">
        <p class="role-line">{{ vol.role | trim }}</p>
        <p class="role-meta">
            {% set parts = [] %}
            {% if vol.role and vol.role != "Independent Project" %}{{ parts.append(vol.role) }}{% endif %}
            {% if vol.organization and vol.organization not in parts %}{{ parts.append(vol.organization) }}{% endif %}
            {% if vol.start_date or vol.end_date %}
                {% set dates = (vol.start_date or "") ~ (" – " if vol.start_date and vol.end_date else "") ~ (vol.end_date or "") %}
                {{ parts.append(dates) if dates.strip() != " – " else "" }}
            {% endif %}
            {% if vol.location %}{{ parts.append(vol.location) }}{% endif %}
            {{ parts | join(" ∙ ") }}
        </p>
        {% if vol.achievements %}
            {% for achievement in vol.achievements if achievement and achievement|trim %}
                <p class="achievement">• {{ achievement | replace("•", "") | trim }}</p>
            {% endfor %}
        {% endif %}
    </div>
    {% endfor %}
    {% endif %}

    <!-- Skills -->
    {% if structured_result.skills %}
    <h2>Skills</h2>
    <div class="skills">
        {% for skill in structured_result.skills if skill and (skill.skill or skill)|trim %}
            {% if skill.skill %}{{ skill.skill }}{% else %}{{ skill }}{% endif %}{% if not loop.last %}, {% endif %}
        {% endfor %}
    </div>
    {% endif %}

    <!-- Combined Education & Certifications Section -->
    {% if structured_result.education or structured_result.has_certifications %}
    <h2>Education & Certifications</h2>
    
    <!-- Education entries -->
    {% for edu in structured_result.education %}
        <div class="edu-cert-item">
            <span class="edu-cert-title">
                {% if edu.degree %}{{ edu.degree }}{% if edu.major %}, {{ edu.major }}{% endif %}{% endif %}
            </span>
            {% if edu.institution %} | {{ edu.institution }}{% endif %}
        </div>
    {% endfor %}

    <!-- Certifications entries (only if they exist) -->
    {% if structured_result.has_certifications %}
        {% for cert in structured_result.certifications %}
            {% if cert and (cert.title or cert) and cert.title %}
                <div class="edu-cert-item">
                    <span class="edu-cert-title">{{ cert.title }}</span>
                    {% if cert.issuer and cert.issuer.strip() %} | {{ cert.issuer }}{% endif %}
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}
    {% endif %}

</body>
</html>